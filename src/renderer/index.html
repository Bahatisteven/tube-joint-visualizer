<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tube Joint Visualizer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Control Panel -->
        <div class="control-panel">
            <h2>Tube Joint Visualizer</h2>
            
            <div class="section">
                <h3>Tube Type</h3>
                <div class="radio-group">
                    <label>
                        <input type="radio" name="tubeType" value="rectangular" checked>
                        Rectangular
                    </label>
                    <label>
                        <input type="radio" name="tubeType" value="square">
                        Square
                    </label>
                </div>
            </div>

            <div class="section">
                <h3>Dimensions (mm)</h3>
                
                <div class="input-group">
                    <label>Width:</label>
                    <input type="number" id="width" value="100" min="10" max="500" step="5">
                    <span class="unit">mm</span>
                </div>

                <div class="input-group" id="heightGroup">
                    <label>Height:</label>
                    <input type="number" id="height" value="50" min="10" max="500" step="5">
                    <span class="unit">mm</span>
                </div>

                <div class="input-group">
                    <label>Thickness:</label>
                    <input type="number" id="thickness" value="3" min="1" max="20" step="0.5">
                    <span class="unit">mm</span>
                </div>

                <div class="input-group">
                    <label>Length:</label>
                    <input type="number" id="length" value="500" min="50" max="2000" step="10">
                    <span class="unit">mm</span>
                </div>
            </div>

            <div class="section">
                <button id="addTube" class="btn btn-primary">+ Add Tube</button>
                <button id="deleteTube" class="btn btn-danger">Delete Selected</button>
            </div>

            <div class="section">
                <h3>View Mode</h3>
                <div class="radio-group">
                    <label>
                        <input type="radio" name="viewMode" value="solid" checked>
                        Solid
                    </label>
                    <label>
                        <input type="radio" name="viewMode" value="wireframe">
                        Wireframe
                    </label>
                </div>
            </div>

            <div class="section">
                <h3>Actions</h3>
                <button id="undo" class="btn">↶ Undo</button>
                <button id="redo" class="btn">↷ Redo</button>
            </div>

            <div class="section info-panel">
                <h3>Info</h3>
                <div id="tubeCount">Tubes: 0</div>
                <div id="jointInfo">Joints: 0</div>
                <div id="selectedInfo" style="white-space: pre-line; line-height: 1.4; font-size: 12px;">Selected: None</div>
            </div>
        </div>

        <!-- 3D Viewport -->
        <div class="viewport">
            <div id="canvas-container"></div>
            <div class="viewport-overlay">
                <div class="help-text">
                    <strong>Controls:</strong><br>
                    <strong>Camera:</strong><br>
                    Left Click + Drag: Rotate view<br>
                    Right Click + Drag: Pan view<br>
                    Mouse Wheel: Zoom<br>
                    <br>
                    <strong>Tubes:</strong><br>
                    Click Tube: Select (turns yellow)<br>
                    Drag Tube: Move it<br>
                    Delete/Backspace: Remove tube<br>
                    <br>
                    <strong>Visual Indicators:</strong><br>
                    Red Sphere: Joint location<br>
                    Magenta Line: Connection between tubes<br>
                    RGB Arrows: Tube orientation (selected only)<br>
                    - Red=X, Green=Y, Blue=Z<br>
                    <br>
                    <strong>Keyboard (select tube first):</strong><br>
                    Arrow Keys: Move (Shift = 10x faster)<br>
                    PageUp/+: Move up<br>
                    PageDown/-: Move down<br>
                    R/E: Rotate Y axis<br>
                    Q/W: Rotate X axis<br>
                    (Hold Shift for 30° rotation)
                </div>
            </div>
        </div>
    </div>

    <script type="importmap">
    {
        "imports": {
            "three": "../../node_modules/three/build/three.module.js",
            "three/addons/": "../../node_modules/three/examples/jsm/"
        }
    }
    </script>
    <script type="module" src="app.js"></script>
</body>
</html>
